package lineage.world.controller;

import java.util.ArrayList;
import java.util.List;

import lineage.database.ServerDatabase;
import lineage.share.Lineage;
import lineage.share.TimeLine;
import lineage.thread.AiThread;
import lineage.world.object.monster.TrapArrow;

public class TalkIslandDungeonController {

	// 말섬던전2층 화살트랩에 사용될 변수들.
	static private int[][] arrow_loc;
	static private List<TrapArrow> arrow_pool;

	static public void init() {
		TimeLine.start("TalkIslandDungeonController..");

		//
		arrow_pool = new ArrayList<TrapArrow>();
		arrow_loc = new int[][] {
				// x, y, goto_x, goto_y, map
				{ 32673, 32856, 32673, 32862, 2 }, { 32677, 32856, 32677, 32862, 2 }, { 32679, 32856, 32679, 32862, 2 }, { 32681, 32856, 32681, 32862, 2 }, { 32684, 32857, 32672, 32857, 2 },
				{ 32684, 32859, 32672, 32859, 2 }, { 32684, 32861, 32672, 32861, 2 },

				{ 32669, 32863, 32669, 32871, 2 }, { 32665, 32863, 32665, 32871, 2 }, { 32672, 32864, 32664, 32864, 2 }, { 32672, 32865, 32664, 32865, 2 }, { 32674, 32868, 32662, 32868, 2 },
				{ 32674, 32869, 32662, 32869, 2 },

				{ 32673, 32873, 32662, 32873, 2 },

				{ 32662, 32873, 32655, 32873, 2 }, { 32658, 32867, 32658, 32880, 2 },

				{ 32817, 32826, 32811, 32826, 2 }, { 32817, 32827, 32811, 32827, 2 }, { 32817, 32828, 32811, 32828, 2 }, { 32817, 32829, 32811, 32829, 2 }, { 32817, 32830, 32811, 32830, 2 },
				{ 32817, 32831, 32811, 32831, 2 }, { 32817, 32832, 32811, 32832, 2 }, { 32817, 32833, 32811, 32833, 2 }, { 32817, 32834, 32811, 32834, 2 }, { 32817, 32835, 32811, 32835, 2 },
				{ 32817, 32836, 32811, 32836, 2 }, { 32817, 32837, 32811, 32837, 2 }, { 32817, 32838, 32811, 32838, 2 }, { 32817, 32839, 32811, 32839, 2 }, { 32817, 32840, 32811, 32840, 2 },
				{ 32817, 32841, 32811, 32841, 2 }, { 32817, 32842, 32811, 32842, 2 }, { 32817, 32843, 32811, 32843, 2 }, { 32817, 32844, 32811, 32844, 2 }, { 32817, 32845, 32811, 32845, 2 },
				{ 32817, 32846, 32811, 32846, 2 }, { 32817, 32847, 32811, 32847, 2 }, { 32817, 32848, 32811, 32848, 2 },

				{ 32804, 32838, 32792, 32838, 2 }, { 32804, 32841, 32794, 32841, 2 },

				{ 32745, 32806, 32737, 32806, 2 }, { 32745, 32807, 32735, 32807, 2 },

				{ 32760, 32800, 32745, 32800, 2 }, { 32760, 32801, 32745, 32801, 2 }, { 32760, 32802, 32745, 32802, 2 }, { 32760, 32803, 32745, 32803, 2 }, { 32760, 32804, 32753, 32804, 2 },
				{ 32760, 32805, 32753, 32805, 2 },

				{ 32751, 32784, 32751, 32798, 2 }, { 32755, 32784, 32755, 32798, 2 }, { 32759, 32784, 32759, 32798, 2 }, { 32763, 32784, 32763, 32798, 2 },

				{ 32727, 32840, 32727, 32844, 2 }, { 32729, 32840, 32729, 32844, 2 }, { 32731, 32840, 32731, 32844, 2 }, { 32733, 32840, 32733, 32844, 2 },

				{ 32726, 32853, 32726, 32855, 2 }, { 32728, 32853, 32728, 32857, 2 }, { 32730, 32853, 32730, 32857, 2 }, { 32732, 32853, 32732, 32857, 2 }, { 32734, 32853, 32734, 32857, 2 },
				{ 32736, 32853, 32736, 32857, 2 },

				{ 32757, 32854, 32757, 32867, 2 }, { 32761, 32863, 32746, 32863, 2 }, { 32743, 32860, 32743, 32865, 2 }, { 32735, 32860, 32735, 32865, 2 }, { 32732, 32858, 32732, 32867, 2 },
				{ 32730, 32858, 32730, 32865, 2 }, { 32728, 32858, 32728, 32865, 2 },

				{ 32755, 32855, 32740, 32855, 2 }, { 32755, 32842, 32740, 32842, 2 },

				{ 32759, 32828, 32759, 32841, 2 }, { 32761, 32833, 32746, 32833, 2 },

				{ 32750, 32828, 32750, 32843, 2 }, { 32748, 32828, 32748, 32843, 2 }, { 32746, 32822, 32746, 32837, 2 }, { 32741, 32832, 32741, 32837, 2 }, { 32733, 32832, 32733, 32839, 2 },
				{ 32728, 32832, 32728, 32839, 2 },

				{ 32736, 32845, 32736, 32852, 2 }, { 32734, 32845, 32734, 32852, 2 }, { 32732, 32845, 32732, 32852, 2 }, { 32730, 32845, 32730, 32852, 2 }, { 32728, 32845, 32728, 32852, 2 },
				{ 32726, 32845, 32726, 32852, 2 }, { 32724, 32845, 32724, 32852, 2 },

				{ 32722, 32834, 32707, 32834, 2 }, { 32694, 32832, 32694, 32847, 2 },

				// 본던 1층
				{ 32782, 32758, 32782, 32773, 7 }, { 32781, 32758, 32781, 32773, 7 }, { 32780, 32758, 32780, 32773, 7 },

				// 본던 2층
				{ 32732, 32750, 32724, 32750, 8 }, { 32732, 32747, 32726, 32747, 8 }, { 32780, 32766, 32780, 32767, 8 }, { 32782, 32766, 32782, 32767, 8 }, { 32784, 32766, 32784, 32767, 8 },
				{ 32786, 32766, 32786, 32767, 8 }, { 32788, 32766, 32788, 32767, 8 }, { 32790, 32766, 32790, 32767, 8 }, { 32792, 32766, 32792, 32767, 8 },

				// 본던 3층
				{ 32773, 32743, 32769, 32743, 9 }, { 32773, 32745, 32769, 32745, 9 }, { 32773, 32747, 32769, 32747, 9 }, { 32773, 32749, 32769, 32749, 9 }, { 32773, 32751, 32769, 32751, 9 },
				{ 32773, 32753, 32769, 32753, 9 }, { 32773, 32755, 32769, 32755, 9 }, { 32773, 32757, 32769, 32757, 9 }, { 32773, 32759, 32769, 32759, 9 }, { 32773, 32761, 32761, 32761, 9 },
				{ 32773, 32763, 32763, 32763, 9 }, { 32737, 32744, 32733, 32744, 9 }, { 32737, 32746, 32733, 32746, 9 }, { 32737, 32748, 32733, 32748, 9 }, { 32737, 32750, 32733, 32750, 9 },
				{ 32737, 32752, 32733, 32752, 9 }, { 32737, 32754, 32733, 32754, 9 }, { 32737, 32756, 32733, 32756, 9 }, { 32737, 32758, 32733, 32758, 9 }, { 32737, 32760, 32733, 32760, 9 },
				{ 32737, 32762, 32733, 32762, 9 }, { 32737, 32764, 32733, 32764, 9 },
				
				//뉴말던
				{ 32673, 32856, 32673, 32862, 815}, { 32677, 32856, 32677, 32862, 815}, { 32679, 32856, 32679, 32862, 815}, { 32681, 32856, 32681, 32862, 815}, { 32684, 32857, 32672, 32857, 815},
				{ 32684, 32859, 32672, 32859, 815}, { 32684, 32861, 32672, 32861, 815},

				{ 32669, 32863, 32669, 32871, 815}, { 32665, 32863, 32665, 32871, 815}, { 32672, 32864, 32664, 32864, 815}, { 32672, 32865, 32664, 32865, 815}, { 32674, 32868, 32662, 32868, 815},
				{ 32674, 32869, 32662, 32869, 815},

				{ 32673, 32873, 32662, 32873, 815},

				{ 32662, 32873, 32655, 32873, 815}, { 32658, 32867, 32658, 32880, 815},

				{ 32817, 32826, 32811, 32826, 815}, { 32817, 32827, 32811, 32827, 815}, { 32817, 32828, 32811, 32828, 815}, { 32817, 32829, 32811, 32829, 815}, { 32817, 32830, 32811, 32830, 815},
				{ 32817, 32831, 32811, 32831, 815}, { 32817, 32832, 32811, 32832, 815}, { 32817, 32833, 32811, 32833, 815}, { 32817, 32834, 32811, 32834, 815}, { 32817, 32835, 32811, 32835, 815},
				{ 32817, 32836, 32811, 32836, 815}, { 32817, 32837, 32811, 32837, 815}, { 32817, 32838, 32811, 32838, 815}, { 32817, 32839, 32811, 32839, 815}, { 32817, 32840, 32811, 32840, 815},
				{ 32817, 32841, 32811, 32841, 815}, { 32817, 32842, 32811, 32842, 815}, { 32817, 32843, 32811, 32843, 815}, { 32817, 32844, 32811, 32844, 815}, { 32817, 32845, 32811, 32845, 815},
				{ 32817, 32846, 32811, 32846, 815}, { 32817, 32847, 32811, 32847, 815}, { 32817, 32848, 32811, 32848, 815},

				{ 32804, 32838, 32792, 32838, 815}, { 32804, 32841, 32794, 32841, 815},

				{ 32745, 32806, 32737, 32806, 815}, { 32745, 32807, 32735, 32807, 815},

				{ 32760, 32800, 32745, 32800, 815}, { 32760, 32801, 32745, 32801, 815}, { 32760, 32802, 32745, 32802, 815}, { 32760, 32803, 32745, 32803, 815}, { 32760, 32804, 32753, 32804, 815},
				{ 32760, 32805, 32753, 32805, 815},

				{ 32751, 32784, 32751, 32798, 815}, { 32755, 32784, 32755, 32798, 815}, { 32759, 32784, 32759, 32798, 815}, { 32763, 32784, 32763, 32798, 815},

				{ 32727, 32840, 32727, 32844, 815}, { 32729, 32840, 32729, 32844, 815}, { 32731, 32840, 32731, 32844, 815}, { 32733, 32840, 32733, 32844, 815},

				{ 32726, 32853, 32726, 32855, 815}, { 32728, 32853, 32728, 32857, 815}, { 32730, 32853, 32730, 32857, 815}, { 32732, 32853, 32732, 32857, 815}, { 32734, 32853, 32734, 32857, 815},
				{ 32736, 32853, 32736, 32857, 815},

				{ 32757, 32854, 32757, 32867, 815}, { 32761, 32863, 32746, 32863, 815}, { 32743, 32860, 32743, 32865, 815}, { 32735, 32860, 32735, 32865, 815}, { 32732, 32858, 32732, 32867, 815},
				{ 32730, 32858, 32730, 32865, 815}, { 32728, 32858, 32728, 32865, 815},

				{ 32755, 32855, 32740, 32855, 815}, { 32755, 32842, 32740, 32842, 815},

				{ 32759, 32828, 32759, 32841, 815}, { 32761, 32833, 32746, 32833, 815},

				{ 32750, 32828, 32750, 32843, 815}, { 32748, 32828, 32748, 32843, 815}, { 32746, 32822, 32746, 32837, 815}, { 32741, 32832, 32741, 32837, 815}, { 32733, 32832, 32733, 32839, 815},
				{ 32728, 32832, 32728, 32839, 815},

				{ 32736, 32845, 32736, 32852, 815}, { 32734, 32845, 32734, 32852, 815}, { 32732, 32845, 32732, 32852, 815}, { 32730, 32845, 32730, 32852, 815}, { 32728, 32845, 32728, 32852, 815},
				{ 32726, 32845, 32726, 32852, 815}, { 32724, 32845, 32724, 32852, 815},

				{ 32722, 32834, 32707, 32834, 815}, { 32694, 32832, 32694, 32847, 815},
		};
		for (int[] loc : arrow_loc) {
			TrapArrow at = TrapArrow.clone(getPool(), loc, 66);
			at.setObjectId(ServerDatabase.nextEtcObjId());
			at.toTeleport(loc[0], loc[1], loc[4], false);
			AiThread.append(at);
		}

		TimeLine.end();
	}

	static public TrapArrow getPool() {
		if (!Lineage.memory_recycle)
			return null;
		synchronized (arrow_pool) {
			TrapArrow ta = arrow_pool.size() == 0 ? null : arrow_pool.get(0);
			if (ta != null) {
				arrow_pool.remove(0);
			}
			return ta;
		}
	}

	static public void setPool(TrapArrow ta) {
		ta.close();
		if (!Lineage.memory_recycle)
			return;
		synchronized (arrow_pool) {
			if (!arrow_pool.contains(ta))
				arrow_pool.add(ta);
		}
	}

}
